# Old content
# [defaults]
# inventory = inventory
# remote_user = ubuntu
# interpreter_python = auto_silent


# [ssh_connection]
# private_key_file = ~/.ssh/ansible
# ssh_args = -o StrictHostKeyChecking=accept-new
# ansible_ssh_common_args='-o StrictHostKeyChecking=accept-new'

[defaults]
inventory = inventories/lab/inventory.yml
remote_user = ubuntu
private_key_file = ~/.ssh/ansible
interpreter_python = auto_silent

forks = 20
timeout = 30
retry_files_enabled = False
host_key_checking = True

# Built-in default callback with YAML output (no deprecation)
stdout_callback = ansible.builtin.default
bin_ansible_callbacks = True
callbacks_enabled = ansible.posix.timer, ansible.posix.profile_tasks

[callback_default]
# This replaces community.general.yaml
result_format = yaml

[ssh_connection]
pipelining = True
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=accept-new
